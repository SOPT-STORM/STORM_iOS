# ⚡️ STORM ⚡️ iOS 최종 제출 과제 



## 1. ⚡️개발환경 및 사용한 라이브러리 ⚡️



* __개발환경__
  - __xcode 버전  : __ Version 11.5
  - __Target : __ iOS 11.0



* __사용한 라이브러리__
  * Socket.IO-Client-Swift
  * Alamofire
  * FlexiblePageControl
  * lottie-ios



------

## 2. ⚡️실행화면 캡쳐 + 간단한 화면 설명 (개발한 화면 모두 포함) ⚡️



### ⚡️Main⚡️

![storm_bigcard](https://user-images.githubusercontent.com/59338503/87799629-6db66980-c888-11ea-8806-34de4ede6a60.png)

![storm_startload](https://user-images.githubusercontent.com/59338503/87799790-9b9bae00-c888-11ea-99a6-16376f78ef14.png)
![storm_round](https://user-images.githubusercontent.com/59338503/87799798-9dfe0800-c888-11ea-9b20-75a6d9878dcb.png)
![storm_totext](https://user-images.githubusercontent.com/59338503/87799811-a1918f00-c888-11ea-8056-3898fb704b3f.png)
![storm_toimage](https://user-images.githubusercontent.com/59338503/87799814-a22a2580-c888-11ea-91d4-86fca541be59.png)
![Simulator Screen Shot - iPhone 11 Pro - 2020-07-17 at 22 50 51](https://user-images.githubusercontent.com/59338503/87799822-a3f3e900-c888-11ea-9895-8335468e71d4.png)

<img src="/Users/kimjihyeon/Desktop/storm_main.png" alt="storm_main" style="zoom:25%;" /><img src="/Users/kimjihyeon/Desktop/storm_nocode.png" alt="storm_nocode" style="zoom:25%;" />

> 메인화면, 없는 참여 코드 안내 (팝업)



<img src="/Users/kimjihyeon/Desktop/storm_code.png" alt="storm_code" style="zoom:25%;" />

> 참여코드 생성 (팝업)



<img src="/Users/kimjihyeon/Desktop/storm_recent.png" alt="storm_recent" style="zoom:25%;" />

> 참여한 프로젝트 더보기



### ⚡️Project HOST⚡️

<video src="/Users/kimjihyeon/Desktop/storm_promake.mov"></video>

> 라운드 설정



<img src="/Users/kimjihyeon/Desktop/storm_rule.png" alt="storm_rule" style="zoom:25%;" /><img src="/Users/kimjihyeon/Desktop/storm_startload.png" alt="storm_startload" style="zoom:25%;" />

> 브레인스토밍 툴 리마인더 (팝업), 라운드 시작 안내 (팝업)



<img src="/Users/kimjihyeon/Desktop/storm_roundend.png" alt="storm_roundend" style="zoom:25%;" /> <img src="/Users/kimjihyeon/Desktop/Simulator Screen Shot - iPhone 11 Pro - 2020-07-17 at 22.50.51.png" alt="Simulator Screen Shot - iPhone 11 Pro - 2020-07-17 at 22.50.51" style="zoom: 25%;" />

> 라운드 종료 후 회의, 카드 회전목마 보기



<img src="/Users/kimjihyeon/Desktop/storm_nexthost.png" alt="storm_nexthost" style="zoom:25%;" />

> 다음 단계 선택 (팝업)



### ⚡️Project MEMBER⚡️

<img src="/Users/kimjihyeon/Desktop/storm_ing.png" alt="storm_ing" style="zoom:25%;" /> <img src="/Users/kimjihyeon/Desktop/storm_rule.png" alt="storm_rule" style="zoom:25%;" /><img src="/Users/kimjihyeon/Desktop/storm_proout.png" alt="storm_proout" style="zoom:25%;" />

> 라운드 설정 대기, 브레인스토밍 룰 리마인더 (팝업), 프로젝트 나가기 (팝업)



<img src="/Users/kimjihyeon/Desktop/storm_done.png" alt="storm_done" style="zoom:25%;" /> <img src="/Users/kimjihyeon/Desktop/storm_rule.png" alt="storm_rule" style="zoom:25%;" /><img src="/Users/kimjihyeon/Desktop/storm_proout.png" alt="storm_" style="zoom:25%;" /><img src="/Users/kimjihyeon/Desktop/storm_startload.png" alt="storm_startload" style="zoom:25%;" />

> 라운드 시작 대기, 브레인스토밍 룰 리마인더 (팝업), 프로젝트 나가기 (팝업), 라운드 시작 안내 (팝업)



<img src="/Users/kimjihyeon/Desktop/storm_nextmember.png" alt="storm_nextmember" style="zoom:25%;" />

> 라운드 종료 후 회의



### ⚡️Project ALL⚡️

<img src="/Users/kimjihyeon/Desktop/storm_image.png" alt="storm_image" style="zoom:25%;" /> <img src="/Users/kimjihyeon/Desktop/storm_totext.png" alt="storm_totext" style="zoom:25%;" />

> 그림 카드 추가, 글 모드로 변경 시 안내 (팝업)



<img src="/Users/kimjihyeon/Desktop/storm_text.png" alt="storm_text" style="zoom:25%;" /> <img src="/Users/kimjihyeon/Desktop/storm_toimage.png" alt="storm_toimage" style="zoom:25%;" />

> 글 카드 추가, 그림 모드로 변경 시 안내 (팝업)



<img src="/Users/kimjihyeon/Desktop/storm_proout.png" alt="storm_proout" style="zoom:25%;" />

> 뒤로가기 (팝업)



### ⚡️Project FINAL⚡️

<img src="/Users/kimjihyeon/Desktop/storm_round.png" alt="storm_round" style="zoom:25%;" /><img src="/Users/kimjihyeon/Desktop/storm_bigcard2.png" alt="storm_bigcard2" style="zoom:25%;" />

> 라운드 별 카드 리스트, 카드 크게보기 & 메모



<img src="/Users/kimjihyeon/Desktop/storm_scrap.png" alt="storm_scrap" style="zoom:25%;" /><img src="/Users/kimjihyeon/Desktop/storm_bigcard.png" alt="storm_bigcard" style="zoom:25%;" />

> 스크랩한 카드 리스트, 카드 크게보기 & 메모



------

## 3. ⚡️기능별 개발 여부 + 담당자 (ex. IA 명세서 기능) ⚡️

[⚡️__기능명세서__⚡️](https://docs.google.com/spreadsheets/d/1a4JL1O6FLVjjnCx7rg4781ici10yg-ZGDMqT5empflk/edit#gid=686412120)



#### ⚡️Main⚡️

|   구분   |      1Depth       |           2Depth           |        3Depth        | 담당자 | 개발 여부 |
| :------: | :---------------: | :------------------------: | :------------------: | :----: | :-------: |
| __Main__ |     메인화면      |                            |                      | 이승환 |     o     |
|          |                   | 없는 참여 코드 안내 (팝업) |                      | 김지현 |     o     |
|          | 프로젝트 추가하기 |       프로젝트 설정        |                      | 이지윤 |     o     |
|          |                   |                            | 참여코드 생성 (팝업) | 김지현 |     o     |
|          |  참여한 프로젝트  |                            |                      | 이승환 |     o     |



#### ⚡️Project HOST⚡️

|       구분       |        1Depth         |             2Depth              | 3Depth | 담당자 | 개발 여부 |
| :--------------: | :-------------------: | :-----------------------------: | :----: | :----: | :-------: |
| __Project HOST__ |      라운드 설정      |                                 |        | 이지윤 |     o     |
|                  |      라운드 시작      |                                 |        | 이지윤 |     o     |
|                  |                       | 브레인스토밍 룰 리마인더 (팝업) |        | 김지현 |     o     |
|                  |                       |     라운드 시작 안내 (팝업)     |        | 김지현 |     o     |
|                  |  라운드 종료 후 회의  |                                 |        | 이승환 |     o     |
|                  |                       |         카드 크게 보기          |        | 이승환 |     o     |
|                  | 다음 단계 선택 (팝업) |                                 |        | 김지현 |     o     |



#### ⚡️Project MEMBER⚡️

|        구분        |       1Depth        |             2Depth              | 3Depth | 담당자 | 개발 여부 |
| :----------------: | :-----------------: | :-----------------------------: | :----: | :----: | :-------: |
| __Project MEMBER__ |  라운드 설정 대기   |                                 |        | 이지윤 |     o     |
|                    |                     | 브레인스토밍 룰 리마인더 (팝업) |        | 김지현 |     o     |
|                    |                     |     프로젝트 나가기 (팝업)      |        | 김지현 |     o     |
|                    |  라운드 시작 대기   |                                 |        | 이지윤 |     o     |
|                    |                     | 브레인스토밍 룰 리마인더 (팝업) |        | 김지현 |     o     |
|                    |                     |     프로젝트 나가기 (팝업)      |        | 김지현 |     o     |
|                    |                     |     라운드 시작 안내 (팝업)     |        | 김지현 |     o     |
|                    | 라운드 종료 후 회의 |                                 |        | 이승환 |     o     |



#### ⚡️Project ALL⚡️

|      구분       |      1Depth      |     2Depth      |             3Depth              | 담당자 | 개발 여부 |
| :-------------: | :--------------: | :-------------: | :-----------------------------: | :----: | :-------: |
| __Project ALL__ | 라운드 카드 추가 |                 |                                 | 이승환 |     o     |
|                 |                  | 그림 카드 추가  |                                 | 이승환 |     o     |
|                 |                  |                 |  글 모드로 변경시 안내 (팝업)   | 김지현 |     o     |
|                 |                  |  글 카드 추가   |                                 | 이승환 |     o     |
|                 |                  |                 | 그림 모드로 변경 시 안내 (팝업) | 김지현 |     o     |
|                 |                  | 뒤로가기 (팝업) |                                 | 김지현 |     o     |



#### ⚡️Project FINAL⚡️

|       구분        |    1Depth     |        2Depth         |        3Depth         | 담당자 | 개발 여부 |
| :---------------: | :-----------: | :-------------------: | :-------------------: | :----: | :-------: |
| __Project FINAL__ | 프로젝트 정보 |                       |                       | 김지현 |     x     |
|                   |               | 라운드 별 카드 리스트 |                       | 이지윤 |     o     |
|                   |               |                       | 카드 크게 보기 & 메모 | 이지윤 |     o     |
|                   |               | 스크랩한 카드 리스트  |                       | 이지윤 |     o     |
|                   |               |                       | 카드 크게 보기 & 메모 | 이지윤 |     o     |



------

## 4. ⚡️어려운 기능 소개 or 새롭게 알게 된 것 설명 (코드 포함) ⚡️



#### 어려운 기능 소개 / 새롭게 알게 된 것 설명 (승환)



> * 문제
>
>   Carousel방식의 화면 전환 뷰를 만들어야함
>
> 
>
> * 해결
>
>   *UPCarouselFlowLayout 라이브러리 코드 참고하여 새롭게 모델 구축하였음.(머리가 빠지는 줄 알았다...&^) * 
>
> 
>
> ```swift
> public enum UPCarouselFlowLayoutSpacingMode {
>     case fixed(spacing: CGFloat)
>     case overlap(visibleOffset: CGFloat)
> }
> 
> public class UPCarouselFlowLayout: UICollectionViewFlowLayout {
> 
>     private struct LayoutState {
>         var size: CGSize
>         var direction: UICollectionView.ScrollDirection
>         func isEqual(otherState: LayoutState) -> Bool {
>             return self.size.equalTo(otherState.size) && self.direction == otherState.direction
>         }
>     }
> 
>     @IBInspectable public var sideItemScale: CGFloat = 0.849//0.757
>     @IBInspectable public var sideItemAlpha: CGFloat = 0.5
>     public var spacingMode = UPCarouselFlowLayoutSpacingMode.fixed(spacing: 5)
> 
>     private var state = LayoutState(size: .zero, direction: .horizontal)
> 
>     // Tells the layout object to update the current layout.
>     override public func prepare() {
>         super.prepare()
>         
>         let currentState = LayoutState(size: self.collectionView!.bounds.size, direction: self.scrollDirection)
> 
>         if !self.state.isEqual(otherState: currentState) {
> 
>             self.setupCollectionView()
>             self.updateLayout()
>             self.state = currentState
>         }
>     }
> 
>     private func setupCollectionView() {
> //        guard let collectionView = self.collectionView else { return }
> //        if collectionView.decelerationRate != UIScrollView.DecelerationRate.fast {
> //            collectionView.decelerationRate = UIScrollView.DecelerationRate.fast
> //        }
>     }
> 
>     private func updateLayout() {
>         guard let collectionView = self.collectionView else { return }
> 
>         let collectionSize = collectionView.bounds.size
> //        let isHorizontal = (self.scrollDirection == .horizontal)
> 
>         let yInset = (collectionSize.height - self.itemSize.height) / 2
>         let xInset = (collectionSize.width - self.itemSize.width) / 2
>         self.sectionInset = UIEdgeInsets(top: yInset, left: xInset, bottom: yInset, right: xInset)
> 
>         let side = self.itemSize.width
>         let scaledItemOffset =  (side - side*self.sideItemScale) / 2
>         switch self.spacingMode {
>         case .fixed(let spacing):
>             self.minimumLineSpacing = spacing - scaledItemOffset
>         case .overlap(let visibleOffset):
>             let fullSizeSideItemOverlap = visibleOffset + scaledItemOffset
>             let inset = xInset
>             self.minimumLineSpacing = inset - fullSizeSideItemOverlap
>         }
>         print("미니멈 라인 스페이싱\(self.minimumLineSpacing)")
>     }
>     
>     
>     public override func shouldInvalidateLayout(forBoundsChange newBounds: CGRect) -> Bool {
>         return true
>     }
>     
>     // Returns the layout attributes for all of the cells and views in the specified rectangle.
>     public override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
>         guard let superAttributes = super.layoutAttributesForElements(in: rect),
>             let attributes = NSArray(array: superAttributes, copyItems: true) as? [UICollectionViewLayoutAttributes]
>             else { return nil }
>         return attributes.map({ self.transformLayoutAttributes(attributes: $0) })
>     }
> 
>     private func transformLayoutAttributes(attributes: UICollectionViewLayoutAttributes) -> UICollectionViewLayoutAttributes {
>         guard let collectionView = self.collectionView else { return attributes }
> //        let isHorizontal = (self.scrollDirection == .horizontal)
> 
>         let collectionCenter = collectionView.frame.size.width/2
>         let offset = collectionView.contentOffset.x
>         let normalizedCenter = attributes.center.x - offset
>         
> //        print(attributes,attributes.center.x)
> //        print(collectionCenter,offset,normalizedCenter)
> 
>         let maxDistance = self.itemSize.width + self.minimumLineSpacing
>         let distance = min(abs(collectionCenter - normalizedCenter), maxDistance)
>         let ratio = (maxDistance - distance)/maxDistance
>         
> 
> //        if normalizedCenter < distance * 3 + 5 {
> //            test = normalizedCenter
> //        }
>         
>         let alpha = ratio * (1 - self.sideItemAlpha) + self.sideItemAlpha
>         let scale = ratio * (1 - self.sideItemScale) + self.sideItemScale
>         
>         attributes.alpha = alpha
>         
>         print("maxDistance: \(maxDistance), 절대값: \(abs(collectionCenter - normalizedCenter))")
>         print("레이시오 \(ratio) \(scale)")
>         
> //        attributes.transform3D = CATransform3DScale(CATransform3DIdentity, scale, scale, 1)
>         
>         let visibleRect = CGRect(origin: self.collectionView!.contentOffset, size: self.collectionView!.bounds.size)
>         let dist = attributes.frame.midX - visibleRect.midX
>         var transform = CATransform3DScale(CATransform3DIdentity, scale, scale, 1)
>         transform = CATransform3DTranslate(transform, 0, 0, -abs(dist/1000))
>         attributes.transform3D = transform
>         
> //        print(maxDistance, distance)
> //        print(offset, normalizedCenter, distance, abs(collectionCenter - normalizedCenter), ratio, scale  )
> //        print("scale \(ratio) \(scale) \(self.sideItemScale)")
>         
>         return attributes
>     }
> ```
>
> > 이거 말고는 오지는 리얼맨이라 어려운 게 없었다 ^^&



------



#### 새롭게 알게 된 것 설명 -> UITapGestureRecognizer 사용  (지윤)



> * 문제
>
>   *텍스트필드 입력 시 키보드가 올라와 화면을 가리는 문제 발생*
>
> 
>
> * 해결
>
>   *UITapGestureRecognizer를 활용해 키보드가 올라올 때 일정 영역을 위로 올리는 동작을 추가하였음.*
>
> 
>
> ```swift
> @IBOutlet weak var textFieldYConstraint: NSLayoutConstraint!
> }
> ```
>
> > 위로 올려야 하는 일정영역의 Y Constraint를 IBOutlet으로 추가.
>
> 
>
> ```swift
>     // MARK: - Add Gesture Recognizer for handling Keyboard
>     
>     func setGesture() {
>       let tap = UITapGestureRecognizer(target: self, action: #selector(handleTap))
>       view.addGestureRecognizer(tap)
>     }
>     
>     @objc func handleTap() {
>       self.view.endEditing(true)
>     }
>     
>     func textFieldShouldReturn(_ textField: UITextField) -> Bool{
>         roundGoalTextField.resignFirstResponder()
>         return true
>     }
> ```
>
> > Gesture 설정하여, 텍스트 필드 영역에 사용자의 tap을 감지.
>
> 
>
> ```swift
> extension HostRoundSettingViewController {
>   func registerKeyboardNotification() {
>     NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillShow(_:)), name: UIResponder.keyboardWillShowNotification, object: nil)
>     NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillHide(_:)), name: UIResponder.keyboardWillHideNotification, object: nil)
>   }
>   
>   @objc func keyboardWillShow(_ notification: Notification) {
>     guard let userInfo = notification.userInfo else { return }
>     let duration = userInfo[UIResponder.keyboardAnimationDurationUserInfoKey] as! Double
>     let curve = userInfo[UIResponder.keyboardAnimationCurveUserInfoKey] as! UInt
>     let keyboardSize = (userInfo[UIResponder.keyboardFrameEndUserInfoKey] as! NSValue).cgRectValue
>     let keyboardHeight = keyboardSize.height
>     
>     textFieldYConstraint.constant = -keyboardHeight/2
>     roundSettingLabel.isHidden = true
>     stormLogoImage.isHidden = true
>     
>     UIView.animate(withDuration: duration, delay: 0, options: .init(rawValue: curve), animations: {
>       self.view.layoutIfNeeded()
>     })
>   }
>   
>   @objc func keyboardWillHide(_ notification: Notification) {
>     guard let userInfo = notification.userInfo else { return }
>     let duration = userInfo[UIResponder.keyboardAnimationDurationUserInfoKey] as! Double
>     let curve = userInfo[UIResponder.keyboardAnimationCurveUserInfoKey] as! UInt
>     
>     textFieldYConstraint.constant = 0
>     roundSettingLabel.isHidden = false
>     stormLogoImage.isHidden = false
>     UIView.animate(withDuration: duration, delay: 0, options: .init(rawValue: curve), animations: {
>       self.view.layoutIfNeeded()
>     })
>   }
> }
> 
> ```
>
> > 키보드가 나타날 때, 일정 영역을 위로 올리고, 일정 요소를 isHidden = true처리하여 UX개선.



------



#### 새롭게 알게 된 것 -> 팝업 NSNotification 사용 (지현)



> * 문제
>
>   *팝업을 띄워야 하는 뷰에 PopUp를 ChildView로 추가해주어 띄웠다가, 다시 '확인' 버튼을 누르면 팝업뷰가 사라지도록 self.view.removeFromSuperview()를 사용하였는데, 띄우는 것은 되지만 사라지는 것이 되지 않았음*
>
> 
>
> * 해결
>
>   *NSNotification을 써서 '확인' 버튼을 누를 때  Event를 Post 해서 팝업을 띄울 때의 순서와 정반대로 팝업뷰를 지웠다.*
>
> 
>
> ```swift
> extension NSNotification.Name {
>     static let buttonClickInPopup = NSNotification.Name(rawValue: "buttonClickpopup")
> }
> ```
>
> > 팝업뷰 띄울 parent 뷰에서 buttonClickInPopUp Notification 생성
>
> 
>
> ```swift
> @IBAction func remindOkButtonDidTap(_ sender: UIButton) {
>         NotificationCenter.default.post(name: .buttonClickInPopup, object: nil)
>         self.removeAnimate()
>     }
> ```
>
> > 팝업뷰 상의 ok 버튼 IBAction, removeAnimate()는 애니메이션 함수
>
> 
>
> ```swift
> childVC?.willMove(toParent: nil)
> childVC?.removeFromParent()
> ```
>
> > notification 발생 시 remove 함수 코드, 띄울 때와 반대 순서



------

## 5. ⚡️👨‍💻팀원 역할 및 소개👩‍💻⚡️



#### ⚡️이승환⚡️

> "Sexy(섹시) Top(톱) Ojinun(오지는) Real(리얼) Man(맨)"  ~~(뭔 소리야??)~~

* instagram : [@lsh424](https://www.instagram.com/lsh424)
* [github](https://github.com/lsh424)



#### ⚡️이지윤⚡️

> "기획, 디자인, 개발 그거 다 혼자서 하면 안 되나요?"

* instagram: [@j.reigh](https://www.instagram.com/j.reigh/?hl=ko)
* [github](https://github.com/j2reigh)
* [personal website](j-archives.xyz)



#### ⚡️김지현⚡️

> "제 체력은 반나절 가는 배터리와 같습니다 ^0^ 간혹 무표정인 지현을 발견한다면 절약모드라는 걸 알아주세요 😇"

* instagram: [@_ji_h_yun_](http://instagram.com/_ji_h_yun_)
* [github](https://github.com/Jihyun247) 











